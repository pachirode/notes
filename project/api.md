# `API`

常用的 `API` 风格主要分为三种，`REST`, `RPC`, `GraphQL`

### `REST`

把所有内容视为资源，对资源的操作主要包括获取，创建，修改和删除，这些操作正好对应 `GET`, `POST`, `PUT`, `DELETE`

- 以资源为中心，所有东西都是资源，行为是在资源上进行 `CRUD`
    - 每个资源带有一个唯一的 `URI` 标识
- 资源是有状态的，使用 `JSON` `XML` 等标识
- 无状态，每次请求包含所有完成本次请求的信息，无需保持 `session`，方便服务端弹性扩容

##### `URI` 设计

- 资源名使用名词标识
    - `Collections`
        - 集合需要使用资源名复数
    - `Member`
        - 单个特定资源应该在资源集合下面
- 结尾不包含 `/`
- 不能出现 `_`, 使用 `-` 分隔
- 路径需要使用小写
- 避免层级过深，使用 `?` 参数避免问题
- 某些操作不能很好的映射资源，将操作变为资源的一个属性
    - `/users/:name`

##### 使用 `HTTP` 方法

- `GET` 返回的结果，要尽可能的用于 `PUT` 和 `POST` 操作
- `PUT` 用于更新
- `POST` 用于创建或者批量删除
- `DELTE`
    - 不能携带多个资源名
        - 使用多个请求
        - 操作路径中携带多个信息，使用分隔符隔开
        - 改用 `POST`

##### 版本管理

同一个 `API` 可能无法向下兼容

- `URL`
    - `/v1/users`
- `HTTP Header`
    - `Accept: ""; version=v1`
- `Form`
    - `/users?version=v1`

##### 统一分页、过滤等功能
- 分页
  - 列出一个 `Collection` 下所有的 `Member`
- 过滤
  - 用户不需要一个资源的全部属性状态
- 排序
  - 需要根据某些特定的因素排列
- 搜索
  - 一类 `Member` 太多
